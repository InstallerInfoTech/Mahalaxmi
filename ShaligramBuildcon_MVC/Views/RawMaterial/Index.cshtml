@model ShaligramBuildcon_MVC.Models.Raw_Material
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="panel panel-white">
    <div class="panel-heading">
        <h5 class="panel-title">
            RawMaterial
        </h5>
    </div>
    <div class="panel-body">
        @(Html.Kendo().Grid<ShaligramBuildcon_MVC.Models.Raw_Material>()
                                    .Name("grid")
                                    .Columns(columns =>
                                    {
                                        columns.Command(command => { command.Edit().Text(" ").HtmlAttributes(new { title = "Add/Edit Rawmaterial" }); command.Destroy().Text(" ").HtmlAttributes(new { title = "Delete Products" }); }).Width(120).Title("Action");
                                        columns.Bound(m => m.Rawmaterial_Id).Width(200).HtmlAttributes(new { style = "text-transform:uppercase;" }).Visible(false);//Width(50);
                                        columns.Bound(m => m.Name).Title("RawMaterial Name");//.Width(50);
                                        columns.Bound(m => m.Description).Title("Description");
                                        columns.Bound(m => m.SKU).Title("SKU");
                                        columns.ForeignKey(p => p.unit_id, (System.Collections.IEnumerable)ViewData["unittype"], "unit_id", "unit_type").Title("Unit Type");
                                        columns.ForeignKey(p => p.Category_id, (System.Collections.IEnumerable)ViewData["categories"], "category_id", "Name").Title("Category");
                                        columns.ForeignKey(p => p.Location_id, (System.Collections.IEnumerable)ViewData["Location"], "Location_id", "Name").Title("Location");


                                    })
                                     .ToolBar(toolbar => toolbar.Template("<a id='btnAdd' class='k-button k-button-icontext k-grid-add' href='#'><span class='k-icon k-add'></span>+Add New Rawmaterial</a>")
                                    )
            .Editable(editable => editable.Mode(GridEditMode.InLine).ConfirmDelete("Continue to delete this record?").DisplayDeleteConfirmation("Continue to delete this record?"))
            .Excel(excel => excel
            .AllPages(true)
            .Filterable(true)
            .FileName("Inquiry.xlsx")

            .ProxyURL(Url.Action("Excel_Export_Save", "Inquiry"))
            )
            //.Editable(editable =>
            //.Resizable(r => r.Columns(true))
            .Pageable(x =>
            {
                x.Refresh(true);
                x.PageSizes(CommonHelper.LargePageSizes);
            })
            .Editable(editable =>
            {
                editable.Mode(GridEditMode.InLine);
                editable.DisplayDeleteConfirmation("Are you sure you want to delete this Category?");//"Are you sure you want to delete this Category?"

            })
            .Filterable(ftb => ftb.Mode(GridFilterMode.Row))
            .Sortable(sortable => sortable.AllowUnsort(false))
            .Scrollable(s => s.Height("auto"))
            .NoRecords()
             
            //.Events(grid => grid.DataBound("onDataBoundEdit"))
            .DataSource(dataSource => dataSource
            .Ajax()
            .ServerOperation(false)
            .PageSize(CommonHelper.PazeSize)
            .Events(events => events.Error("onError(\"InquiryGrid\")"))
            .Model(model => model.Id(d => d.Rawmaterial_Id))
            .Create(update => update.Action("KendoSave", "RawMaterial"))
            .Read(read => read.Action("KendoRead", "RawMaterial"))
            .Update(update => update.Action("KendoSave", "RawMaterial"))
            .Destroy(destroy => destroy.Action("kendoDestroy", "RawMaterial")))

            )


    </div>



   


    @(Html.Kendo().Window()
                          .Name("rawmaterials")
                          .Draggable(true)
                          .Width(870)
                          .Height(520)
                          .Scrollable(true)
                          .Modal(true)
                          .Visible(false)
)

</div>



@(Html.Kendo().Window()
                          .Name("rawmaterials")
                          .Draggable(true)
                          .Width(870)
                          .Height(520)
                          .Scrollable(true)
                          .Modal(true)
                          .Visible(false)
)

<script>
    function GetPRMID(e) {

        return {
            PRMID: e.PRM_id
            
        }
    }

    function GetPSRID(e) {

        return {
            PRSID: e.PSR_id

        }
    }
</script>
@*<script>
        function addrawmaterial(e)
        {
            debugger


            var window = $("#rawmaterials").data("kendoWindow");
            window.content("Add Raw Material");

            window.refresh({
                url: '@Url.Action("AddRawmaterial", "Product")',

            });
            window.center();
            window.open();
            window.title("Add Raw Material")
        }
    </script>*@
