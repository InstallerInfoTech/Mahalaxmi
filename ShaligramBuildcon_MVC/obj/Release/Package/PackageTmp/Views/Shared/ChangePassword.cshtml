@model ShaligramBuildcon_MVC.Models.ChangePassword

    <div class="k-edit-form-container" id="resetform">
        @using (Html.BeginForm("", "", FormMethod.Post, new{ @id = "formChangePassword", style = "margin-top: 12px;" }))
        {
            @Html.HiddenFor(m => m.CurrentUserId)
            @Html.HiddenFor(m => m.RealPassword)
            <div class="editor-label">
                @Html.LabelFor(m => m.OldPassword)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.OldPassword, new { @class = "k-textbox" })
            </div>
            <div class="editor-label">
                @Html.LabelFor(m => m.NewPassword)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.NewPassword, new { @class = "k-textbox" })
            </div>

            <div class="editor-label">
                @Html.LabelFor(m => m.ConfirmPassword)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "k-textbox" })
            </div>

            <div class="k-edit-buttons k-state-default">

                <input type="button" id="btnChange" class="k-button k-button-icontext k-primary" value="Change Password" onclick="return ChangePassword();">
                <input type="button" class="k-button k-button-icontext" value="Cancel" onclick="ClosePasswordWindow()">
            </div>
        }
    </div>

    <script>

    function ClosePasswordWindow() {
        var window = $("#ChangePassword").data("kendoWindow");
        window.close();
    }
    function ChangePassword() {
        var validator = $("#formChangePassword").kendoValidator().data("kendoValidator");
        if (validator.validate()) {
            $('#Reassign_old').remove();
            $('#Reassign_new').remove();
            $('#Reassign_confirm').remove();

            var kendowindow = $("#ChangePassword").data("kendoWindow");

            var oldpwd = $('#OldPassword').val();
            var newpwd = $('#NewPassword').val();
            var confpwd = $('#ConfirmPassword').val();
            var Realpwd = $('#RealPassword').val();

            var isvalid = 1;

            if (oldpwd != Realpwd) {
                $('#OldPassword').after('<span class="k-widget k-tooltip k-tooltip-validation k-invalid-msg field-validation-error"  data-for="ReAssignToId" data-valmsg-for="ReAssignToId" id="Reassign_old" role="alert"><span class="k-icon k-i-warning"></span>Old Password is not Matched.</span>');
                isvalid = 0;
            }
            if (newpwd != confpwd) {
                $('#NewPassword').after('<span class="k-widget k-tooltip k-tooltip-validation k-invalid-msg field-validation-error" data-for="ReAssignToId" data-valmsg-for="ReAssignToId" id="Reassign_confirm" role="alert"><span class="k-icon k-i-warning"></span>New and Confirm Passwords must be Same.</span>');
                $('#ConfirmPassword').after('<span class="k-widget k-tooltip k-tooltip-validation k-invalid-msg field-validation-error" data-for="ReAssignToId" data-valmsg-for="ReAssignToId" id="Reassign_confirm" role="alert"><span class="k-icon k-i-warning"></span>New and Confirm Passwords must be Same.</span>');
                isvalid = 0;
            }
            if (isvalid === 1) {
                var data = $('#formChangePassword').serialize();
                callwebservice('@Url.Action("ChangePassword", "ChangePassword")', data, success, false, datatypeEnum.text, typeEnum.post);
            }
        }

        function success(result) {
            if (result == "") {
                kendowindow.close();
                notification("Success", "Password Changed Successfully.", "success");
                setTimeout(function () { window.location.href = '@Url.Action("Logout","Login")'; }, 2000);
            }
            else {
                showMessageOnly("Errour occurred " + data, 'popup-error');
            }
        }
    }
    </script>